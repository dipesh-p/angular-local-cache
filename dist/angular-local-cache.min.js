/* angular-local-cache 2014-02-23
 @author <= pkg.author.name <pkg.author.email>
 @version 0.0.1 - Homepage <https://github.com/masterdipesh/angular-local-cache>
 @copyright (c) 2014 Dipesh Patel <https://github.com/masterdipesh/angular-local-cache>
 @License MIT <https://github.com/masterdipesh/angular-local-cache/wiki/LICENSE>
*/
var AngularLocalCache=angular.module("$ngLocalCache",[]);AngularLocalCache.provider("$ngLocalCache",function(){function a(){for(var a=0;a<localStorage.length;a++){var e=localStorage.key(a);d.push(e.replace(b.keyPrefix+"-","")),c[e.replace(b.keyPrefix+"-","")]=JSON.parse(localStorage.getItem(e))}}var b={keyPrefix:"ngLC",capacity:100,defaultMaxAge:9e5,recycleFrequency:6e4};this.setCacheOptions=function(a){for(key in a)void 0!=b[key]&&(b[key]=a[key])};var c={},d=[];a(),this.$get=["$timeout",function(a){a(e,b.recycleFrequency);var e=function(){var f=(new Date).getTime();for(var g in d)c[d[g]].expire_at<=f&&(delete c[d[g]],delete d[g],localStorage.removeItem(b.keyPrefix+"-"+d[g]));a(e,b.recycleFrequency)},f=function(){try{var a="localStorage"in window&&null!==window.localStorage,c=b.keyPrefix+"__"+Math.round(1e7*Math.random());return a&&(localStorage.setItem(c,""),localStorage.removeItem(c)),a}catch(d){return!1}},g=function(a,e,g){return void 0==g&&(g=b.defaultMaxAge),c.length>=b.capacity&&(delete c[d[0]],f()&&localStorage.removeItem(b.keyPrefix+"-"+d[0]),delete d[0]),c[a]={data:e,expire_at:(new Date).getTime()+g},d.push(a),f()&&localStorage.setItem(b.keyPrefix+"-"+a,JSON.stringify(c[a])),!0},h=function(a){return void 0!=c[a]?c[a].expire_at>(new Date).getTime()?c[a].data:null:null},i=function(a){for(ind in d)d[ind]==a&&delete d[ind];return delete c[a],f()&&localStorage.removeItem(b.keyPrefix+"-"+a),!0};return{get:h,put:g,"delete":i}}]});